<%= form_with(model: product, class: 'p-4 border rounded shadow-sm', local: true) do |form| %>
  <% if product.errors.any? %>
    <div id="error_explanation" class="alert alert-danger">
      <h4 class="alert-heading"><%= pluralize(product.errors.count, "помилка") %> заборонили збереження цього товару:</h4>
      <ul>
        <% product.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <h3 class="mb-4">Основна інформація про товар</h3>

  <div class="mb-3">
    <%= form.label :name, 'Назва товару', class: 'form-label' %>
    <%= form.text_field :name, class: 'form-control', required: true %>
  </div>

  <div class="mb-3">
    <%= form.label :description, 'Опис товару', class: 'form-label' %>
    <%= form.text_area :description, class: 'form-control' %>
  </div>

  <div class="row">
    <div class="col-md-6 mb-3">
      <%= form.label :price, 'Ціна (€)', class: 'form-label' %>
      <%= form.number_field :price, class: 'form-control', step: '0.01', min: '0', required: true %>
    </div>

    <div class="col-md-6 mb-3">
      <%= form.label :stock, 'Кількість на складі', class: 'form-label' %>
      <%= form.number_field :stock, class: 'form-control', min: '0', required: true %>
    </div>
  </div>

  <div class="mb-3">
  <%= form.label :category_id, "Категорія", class: "form-label" %>
  <%= form.collection_select :category_id, Category.all, :id, :name, { prompt: "Оберіть категорію" }, { class: "form-select" } %>
</div>

  <h3 class="mb-4 mt-5">Зображення товару (до 4-х)</h3>

  <%# Основне зображення %>
  <div class="mb-3">
    <%= form.label :image, 'Основне зображення', class: 'form-label' %>
    <%= form.file_field :image, class: 'form-control' %>
    <% if product.image.present? %>
      <small class="text-muted d-block mt-2">Поточне: <%= link_to product.image.url, product.image.url, target: '_blank' %></small>
    <% end %>
  </div>

  <%# Додаткові зображення %>
  <div class="mb-3">
    <%= form.label :image_2, 'Додаткове зображення 1', class: 'form-label' %>
    <%= form.file_field :image_2, class: 'form-control' %>
    <% if product.image_2.present? %>
      <small class="text-muted d-block mt-2">Поточне: <%= link_to product.image_2.url, product.image_2.url, target: '_blank' %></small>
    <% end %>
  </div>

  <div class="mb-3">
    <%= form.label :image_3, 'Додаткове зображення 2', class: 'form-label' %>
    <%= form.file_field :image_3, class: 'form-control' %>
    <% if product.image_3.present? %>
      <small class="text-muted d-block mt-2">Поточне: <%= link_to product.image_3.url, product.image_3.url, target: '_blank' %></small>
    <% end %>
  </div>

  <div class="mb-3">
    <%= form.label :image_4, 'Додаткове зображення 3', class: 'form-label' %>
    <%= form.file_field :image_4, class: 'form-control' %>
    <% if product.image_4.present? %>
      <small class="text-muted d-block mt-2">Поточне: <%= link_to product.image_4.url, product.image_4.url, target: '_blank' %></small>
    <% end %>
  </div>

  <div class="actions mt-4">
    <%= form.submit 'Зберегти товар', class: 'btn btn-primary w-100' %>
  </div>
<% end %>