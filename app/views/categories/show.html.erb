<%# Цей контент автоматично вставиться у ваш application.html.erb замість <%= yield %> %>

<div class="container py-4">
  
  <%# --- ЗАГОЛОВОК КАТЕГОРІЇ --- %>
  <div class="d-flex justify-content-between align-items-center mb-5 border-bottom pb-3">
    <div>
      <h1 class="display-6"><%= @category.name %></h1>
      <p class="text-muted mb-0"><%= @category.description %></p>
    </div>

    <%# Кнопка видалення (бачить тільки адмін) %>
    <% if current_user&.admin? %>
      <%= link_to category_path(@category), 
          data: { turbo_method: :delete, turbo_confirm: 'Видалити категорію?' }, 
          class: "btn btn-outline-danger btn-sm" do %>
        <i class="bi bi-trash"></i> Видалити категорію
      <% end %>
    <% end %>
  </div>

  <%# --- СІТКА ТОВАРІВ --- %>
  <% if @products.any? %>
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
      <% @products.each do |product| %>
        <div class="col">
          <div class="card h-100 shadow-sm border-0">
            
            <%# Картинка (CarrierWave) %>
            <div style="height: 250px; overflow: hidden; position: relative;">
              <% if product.image.present? %>
                <%= image_tag product.image.url, class: "card-img-top w-100 h-100", style: "object-fit: cover;" %>
              <% else %>
                <div class="d-flex align-items-center justify-content-center bg-light w-100 h-100 text-muted">
                  <i class="bi bi-image" style="font-size: 2rem;"></i>
                </div>
              <% end %>
            </div>

            <div class="card-body d-flex flex-column">
              <h5 class="card-title text-truncate"><%= product.name %></h5>
              <p class="card-text small text-muted text-truncate"><%= product.description %></p>
              
              <div class="mt-auto d-flex justify-content-between align-items-center">
                <span class="fw-bold fs-5"><%= product.price %> грн</span>
                <%= link_to 'Детальніше', product_path(product), class: "btn btn-dark btn-sm rounded-pill px-3" %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>

  <% else %>
    <%# Якщо категорія порожня %>
    <div class="text-center py-5">
      <div class="mb-3">
        <i class="bi bi-box-seam" style="font-size: 3rem; color: #dee2e6;"></i>
      </div>
      <h3 class="text-muted">У цій категорії поки немає товарів</h3>
      <%= link_to 'Повернутися на головну', root_path, class: "btn btn-outline-dark mt-3" %>
    </div>
  <% end %>

</div>