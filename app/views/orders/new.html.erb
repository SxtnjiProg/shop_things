<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card border-0 shadow-sm rounded-4">
        <div class="card-header bg-white border-bottom-0 pt-4 px-4">
          <h3 class="fw-bold mb-0">Оформлення замовлення</h3>
        </div>
        
        <div class="card-body p-4">
          <%= form_with model: @order, url: orders_path, method: :post, local: true do |f| %>
            
            <% if @order.errors.any? %>
              <div class="alert alert-danger rounded-3">
                <ul class="mb-0 small">
                  <% @order.errors.full_messages.each do |msg| %>
                    <li><%= msg %></li>
                  <% end %>
                </ul>
              </div>
            <% end %>

            <h5 class="mb-3 text-muted">1. Адреса доставки</h5>
            <div class="row g-3 mb-4">
              <div class="col-md-6">
                <div class="form-floating">
                  <%= f.text_field :country, class: "form-control", placeholder: "Країна", value: "Україна" %>
                  <%= f.label :country, "Країна" %>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-floating">
                  <%= f.text_field :city, class: "form-control", placeholder: "Місто", required: true %>
                  <%= f.label :city, "Місто" %>
                </div>
              </div>
              <div class="col-md-8">
                <div class="form-floating">
                  <%= f.text_field :street, class: "form-control", placeholder: "Вулиця", required: true %>
                  <%= f.label :street, "Вулиця, номер будинку/кв" %>
                </div>
              </div>
              <div class="col-md-4">
                <div class="form-floating">
                  <%= f.text_field :zip_code, class: "form-control", placeholder: "Індекс", required: true %>
                  <%= f.label :zip_code, "Індекс" %>
                </div>
              </div>
            </div>

            <h5 class="mb-3 text-muted">2. Спосіб доставки</h5>
            <div class="row g-3 mb-4">
              
              <div class="col-md-4">
                <%= f.radio_button :delivery_method, 'nova_poshta', class: "btn-check", id: "delivery_np", checked: true %>
                <label class="btn btn-outline-dark w-100 p-3 h-100 d-flex flex-column align-items-center justify-content-center" for="delivery_np">
                  <i class="bi bi-box-seam display-6 mb-2 text-danger"></i>
                  <span class="fw-bold">Нова Пошта</span>
                  <small class="text-muted">1-2 дні</small>
                </label>
              </div>

              <div class="col-md-4">
                <%= f.radio_button :delivery_method, 'ukr_poshta', class: "btn-check", id: "delivery_ukr" %>
                <label class="btn btn-outline-dark w-100 p-3 h-100 d-flex flex-column align-items-center justify-content-center" for="delivery_ukr">
                  <i class="bi bi-envelope display-6 mb-2 text-warning"></i>
                  <span class="fw-bold">Укрпошта</span>
                  <small class="text-muted">3-5 днів</small>
                </label>
              </div>

              <div class="col-md-4">
                <%= f.radio_button :delivery_method, 'courier', class: "btn-check", id: "delivery_courier" %>
                <label class="btn btn-outline-dark w-100 p-3 h-100 d-flex flex-column align-items-center justify-content-center" for="delivery_courier">
                  <i class="bi bi-bicycle display-6 mb-2 text-success"></i>
                  <span class="fw-bold">Кур'єр iPost</span>
                  <small class="text-muted">Сьогодні</small>
                </label>
              </div>
            </div>

            <div class="d-flex justify-content-between align-items-center border-top pt-4">
              <div>
                <small class="text-muted d-block">Всього до сплати:</small>
                <span class="h3 fw-bold">€<%= @total_price %></span>
              </div>
              <%= f.submit "Перейти до оплати", class: "btn btn-dark btn-lg px-5" %>
            </div>

          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>