<div class="container py-5" data-controller="payment">
  <div class="row justify-content-center">
    <div class="col-lg-6 col-md-8">
      
      <div class="card border-0 shadow-lg rounded-4 overflow-hidden">
        
        <div class="bg-dark text-white p-4 text-center relative">
          <p class="mb-1 opacity-75 text-uppercase small ls-1">Сума до сплати</p>
          <h2 class="display-4 fw-bold mb-0">€<%= @order.total_price %></h2>
          <div class="position-absolute top-0 end-0 p-3">
            <i class="bi bi-shield-lock-fill fs-4"></i>
          </div>
        </div>

        <div class="card-body p-4 p-md-5 bg-light">
          
          <div class="d-flex gap-2 justify-content-center mb-4 opacity-50">
            <i class="bi bi-credit-card-2-front fs-3"></i>
            <i class="bi bi-wallet2 fs-3"></i>
            <i class="bi bi-bank fs-3"></i>
          </div>

          <form onsubmit="return false;">
            
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="cardNumber" placeholder="0000 0000 0000 0000"
                     data-payment-target="number" 
                     data-action="input->payment#formatNumber">
              <label for="cardNumber">Номер картки</label>
              <div class="position-absolute top-50 end-0 translate-middle-y me-3 text-muted">
                <i class="bi bi-credit-card"></i>
              </div>
            </div>

            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="cardName" placeholder="JOHN DOE"
                     style="text-transform: uppercase;"
                     data-payment-target="name"
                     data-action="input->payment#validateForm">
              <label for="cardName">Власник картки</label>
            </div>

            <div class="row g-3 mb-4">
              <div class="col-6">
                <div class="form-floating">
                  <input type="text" class="form-control" id="cardExpiry" placeholder="MM/YY"
                         data-payment-target="expiry"
                         data-action="input->payment#formatExpiry">
                  <label for="cardExpiry">Термін (MM/YY)</label>
                </div>
              </div>
              
              <div class="col-6">
                <div class="form-floating">
                  <input type="password" class="form-control" id="cardCvc" placeholder="123" maxlength="3"
                         data-payment-target="cvc"
                         data-action="input->payment#formatCvc">
                  <label for="cardCvc">CVV / CVC</label>
                  <div class="position-absolute top-50 end-0 translate-middle-y me-3 text-muted" data-bs-toggle="tooltip" title="3 цифри на звороті">
                    <i class="bi bi-question-circle"></i>
                  </div>
                </div>
              </div>
            </div>
          </form>

          <div class="alert alert-warning d-flex align-items-center small py-2 border-0 bg-warning bg-opacity-10 text-warning-emphasis mb-4">
            <i class="bi bi-info-circle-fill me-2"></i>
            <div>
              Це демонстраційний режим. Гроші не списуються.
            </div>
          </div>

          <%= button_to process_payment_order_path(@order), 
              method: :patch, 
              class: "btn btn-secondary w-100 py-3 fw-bold rounded-3 transition-all", 
              disabled: true,
              data: { payment_target: "submitBtn" } do %>
            <span class="me-2">ОПЛАТИТИ</span> <i class="bi bi-arrow-right"></i>
          <% end %>
          
          <div class="text-center mt-3">
             <%= link_to "Скасувати та повернутись", root_path, class: "text-muted small text-decoration-none hover-underline" %>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .ls-1 { letter-spacing: 1px; }
  .transition-all { transition: all 0.3s ease; }
  .hover-underline:hover { text-decoration: underline !important; }
</style>