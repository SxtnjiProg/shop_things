<%# app/views/orders/show.html.erb %>

<%# !!! ДОДАНО: Підключення CSS для цієї сторінки через Layouts !!! %>
<% content_for :head do %>
  <%= stylesheet_link_tag "order_success", "data-turbo-track": "reload" %>
<% end %>


<div class="container my-5 order-success-page">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <%# Центральний блок підтвердження %>
            <div class="text-center success-confirmation-block">
                
                <%# Іконка з анімацією %>
                <div class="success-icon-wrapper">
                    <i class="bi bi-check-lg"></i>
                </div>
                
                <h1 class="mt-4 mb-3">Замовлення №<%= @order.id %> успішно оформлено!</h1>
                <p class="lead text-muted">Ваше замовлення прийнято в обробку. Деталі надіслано на вашу електронну пошту.</p>
                
                <div class="mt-5">
                    <%= link_to 'Перейти до моїх замовлень', orders_path, class: 'btn btn-dark', style: 'border-radius: 0; padding: 12px 25px;' %>
                    <%= link_to 'Продовжити покупки', root_path, class: 'btn btn-outline-dark ms-3', style: 'border-radius: 0; padding: 12px 25px;' %>
                </div>
            </div>
        </div>
    </div>
    
    <%# Деталі та підсумок замовлення %>
    <div class="row mt-5 order-details-summary">
        <div class="col-md-6">
            <h3 class="mb-3">Деталі доставки</h3>
            <p><strong>Статус:</strong> <span class="badge bg-warning text-dark"><%= @order.status.capitalize %></span></p>
            <p><strong>Отримувач:</strong> <%= @order.user.email %></p>
            <p class="mb-1"><strong>Адреса:</strong> <%= @order.street %></p>
            <p class="mb-1"><%= @order.zip_code %>, <%= @order.city %>, <%= @order.country %></p>
        </div>
        <div class="col-md-6">
            <h3 class="mb-3">Підсумок замовлення</h3>
            <ul class="list-group list-group-flush">
                <% @order.order_items.each do |item| %>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <%= item.product.name %> (<%= item.quantity %> шт.)
                        <span class="fw-bold"><%= number_to_currency(item.subtotal, unit: '€') %></span>
                    </li>
                <% end %>
                <li class="list-group-item d-flex justify-content-between align-items-center text-muted">
                    Доставка
                    <span class="fw-bold"><%= number_to_currency(10.00, unit: '€') %></span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center fs-5 fw-bold">
                    Всього
                    <span><%= number_to_currency(@order.total_price, unit: '€') %></span>
                </li>
            </ul>
        </div>
    </div>
</div>